{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/location.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@agm/core\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"uploader\"];\nconst _c1 = [\"map\"];\nfunction LocationFormComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \" Location name is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationFormComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \" Location type is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LocationFormComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"div\", 2);\n    i0.ɵɵtext(2, \"Upload\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"img\", 29);\n    i0.ɵɵlistener(\"click\", function LocationFormComponent_div_39_Template_img_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.attachFile());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction LocationFormComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelement(1, \"img\", 31);\n    i0.ɵɵelementStart(2, \"img\", 32);\n    i0.ɵɵlistener(\"click\", function LocationFormComponent_div_40_Template_img_click_2_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.removeLogo());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r4.imageURL, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction LocationFormComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵtext(1, \" Location logo is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LocationFormComponent {\n  constructor(locationService, activatedRoute, router) {\n    this.locationService = locationService;\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n    this.longitude = -0.13284970668561824;\n    this.latitude = 51.516705368126554;\n    this.firstSubmitPush = false;\n    this.zoom = 10;\n    this.locationForm = new FormGroup({\n      name: new FormControl('', [Validators.required]),\n      location: new FormGroup({\n        lat: new FormControl('', [Validators.required]),\n        lng: new FormControl('', [Validators.required])\n      }),\n      type: new FormControl('', [Validators.required]),\n      logo: new FormControl('', [Validators.required])\n    });\n  }\n  ngOnInit() {\n    const locationId = this.activatedRoute.snapshot.params['id'];\n    if (locationId) {\n      this.locationService.read(+locationId).subscribe(res => {\n        console.log(res);\n        this.imgBlob = res.imgBlob;\n        this.locationForm.get('name')?.setValue(res.name);\n        this.locationForm.get('type')?.setValue(res.type);\n        this.locationForm.patchValue({\n          avatar: res.imgBlob\n        });\n        this.locationForm.get('logo')?.updateValueAndValidity();\n        this.locationForm.get('location')?.patchValue(res.location);\n        this.latitude = res.location.lat;\n        this.longitude = res.location.lng;\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.imageURL = reader.result;\n        };\n        reader.readAsDataURL(res.imgBlob);\n      });\n    } else {\n      this.setCurrentLocation();\n    }\n  }\n  ngAfterViewInit() {\n    if (this.agmMap) {\n      setTimeout(() => {\n        this.agmMap.triggerResize();\n        console.log(this.agmMap);\n      }, 100);\n    } else {\n      console.log('map was not rendered');\n    }\n  }\n  setCurrentLocation() {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(position => {\n        this.latitude = position.coords.latitude;\n        this.longitude = position.coords.longitude;\n        this.zoom = 15;\n      });\n    }\n  }\n  attachFile() {\n    this.uploader.nativeElement.click();\n  }\n  uploaderChanged(event) {\n    if (event.target.files[0].type !== 'image/jpeg' && event.target.files[0].type !== 'image/png') {\n      alert('Logo format is not correct');\n    } else {\n      const file = event.target.files[0];\n      this.imgBlob = file;\n      this.locationForm.patchValue({\n        avatar: file\n      });\n      this.locationForm.get('logo')?.updateValueAndValidity();\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.imageURL = reader.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n  centerChanged($event) {\n    if ($event.lat && $event.lng) {\n      this.locationForm.get('location')?.get('lat')?.setValue($event.lat);\n      this.locationForm.get('location')?.get('lng')?.setValue($event.lng);\n    }\n  }\n  onSubmit() {\n    this.firstSubmitPush = true;\n    if (this.locationForm.valid) {\n      this.locationService.create({\n        ...this.locationForm.value,\n        imgBlob: this.imgBlob\n      }).subscribe(res => {\n        if (res?.id) {\n          this.router.navigateByUrl('/location').then();\n        }\n      });\n    }\n  }\n  removeLogo() {\n    this.imageURL = '';\n    this.locationForm.get('logo')?.setValue(null);\n  }\n}\nLocationFormComponent.ɵfac = function LocationFormComponent_Factory(t) {\n  return new (t || LocationFormComponent)(i0.ɵɵdirectiveInject(i1.LocationService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n};\nLocationFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LocationFormComponent,\n  selectors: [[\"app-location-form\"]],\n  viewQuery: function LocationFormComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.uploader = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.agmMap = _t.first);\n    }\n  },\n  decls: 49,\n  vars: 10,\n  consts: [[1, \"share-location-form\"], [1, \"card-wrapper\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"formGroup\", \"submit\"], [1, \"form-field-wrapper\"], [1, \"field-label\"], [1, \"field-item\"], [\"type\", \"text\", \"formControlName\", \"name\", \"id\", \"location-name\", \"placeholder\", \"Location name ...\"], [\"class\", \"error-message-wrapper\", 4, \"ngIf\"], [1, \"field-item\", \"map-wrapper\"], [\"src\", \"assets/images/pin.png\", \"alt\", \"pin...\", 1, \"pin-img\"], [3, \"disableDefaultUI\", \"latitude\", \"longitude\", \"zoom\", \"centerChange\"], [\"map\", \"\"], [\"id\", \"location-type\", \"formControlName\", \"type\"], [\"selected\", \"\", \"disabled\", \"\"], [\"value\", \"home\"], [\"value\", \"work\"], [\"value\", \"office\"], [\"value\", \"other\"], [\"class\", \"uploader-card-wrapper\", 4, \"ngIf\"], [\"class\", \"image-wrapper\", 4, \"ngIf\"], [\"type\", \"file\", \"accept\", \"image/*\", \"formControlName\", \"logo\", \"id\", \"location-logo\", 1, \"hidden\", 3, \"change\"], [\"uploader\", \"\"], [1, \"button-wrapper\", \"btn-container\"], [\"type\", \"button\", \"routerLink\", \"/location\", 1, \"btn\", \"cancel-return\"], [\"type\", \"submit\", 1, \"btn\", \"btn-save\"], [1, \"error-message-wrapper\"], [1, \"uploader-card-wrapper\"], [\"src\", \"./assets/images/upload-icon.png\", \"alt\", \"uploadImage\", 3, \"click\"], [1, \"image-wrapper\"], [\"alt\", \"logo\", 1, \"image-preview\", 3, \"src\"], [\"src\", \"assets/images/remove.png\", \"alt\", \"remove\", 1, \"remove-icon\", 3, \"click\"]],\n  template: function LocationFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n      i0.ɵɵtext(3, \" Share Location \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"section\", 3)(5, \"form\", 4);\n      i0.ɵɵlistener(\"submit\", function LocationFormComponent_Template_form_submit_5_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"label\", 6);\n      i0.ɵɵtext(8, \"Location name: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 7);\n      i0.ɵɵelement(10, \"input\", 8);\n      i0.ɵɵtemplate(11, LocationFormComponent_div_11_Template, 2, 0, \"div\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 5)(13, \"label\", 6);\n      i0.ɵɵtext(14, \"Location on map: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 10);\n      i0.ɵɵelement(16, \"img\", 11);\n      i0.ɵɵelementStart(17, \"agm-map\", 12, 13);\n      i0.ɵɵlistener(\"centerChange\", function LocationFormComponent_Template_agm_map_centerChange_17_listener($event) {\n        return ctx.centerChanged($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 6);\n      i0.ɵɵtext(21, \"Location type: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 7)(23, \"select\", 14)(24, \"option\", 15);\n      i0.ɵɵtext(25, \"Select location type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"option\", 16);\n      i0.ɵɵtext(27, \"Home\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"option\", 17);\n      i0.ɵɵtext(29, \"Work\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"option\", 18);\n      i0.ɵɵtext(31, \"Office\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"option\", 19);\n      i0.ɵɵtext(33, \"Other\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(34, LocationFormComponent_div_34_Template, 2, 0, \"div\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"div\", 5)(36, \"label\", 6);\n      i0.ɵɵtext(37, \"Logo: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"div\", 7);\n      i0.ɵɵtemplate(39, LocationFormComponent_div_39_Template, 5, 0, \"div\", 20);\n      i0.ɵɵtemplate(40, LocationFormComponent_div_40_Template, 3, 1, \"div\", 21);\n      i0.ɵɵelementStart(41, \"input\", 22, 23);\n      i0.ɵɵlistener(\"change\", function LocationFormComponent_Template_input_change_41_listener($event) {\n        return ctx.uploaderChanged($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(43, LocationFormComponent_div_43_Template, 2, 0, \"div\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"div\", 24)(45, \"button\", 25);\n      i0.ɵɵtext(46, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"button\", 26);\n      i0.ɵɵtext(48, \"Save\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.locationForm);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.locationForm.controls[\"name\"].hasError(\"required\") && ctx.locationForm.controls[\"name\"].touched || ctx.firstSubmitPush && ctx.locationForm.controls[\"name\"].hasError(\"required\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"disableDefaultUI\", false)(\"latitude\", ctx.latitude)(\"longitude\", ctx.longitude)(\"zoom\", ctx.zoom);\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngIf\", ctx.locationForm.controls[\"type\"].hasError(\"required\") && ctx.locationForm.controls[\"type\"].touched || ctx.firstSubmitPush && ctx.locationForm.controls[\"type\"].hasError(\"required\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.imageURL);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.imageURL && ctx.imageURL !== \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.locationForm.controls[\"logo\"].hasError(\"required\") && ctx.locationForm.controls[\"logo\"].touched || ctx.firstSubmitPush && ctx.locationForm.controls[\"logo\"].hasError(\"required\"));\n    }\n  },\n  dependencies: [i2.RouterLink, i3.NgIf, i4.AgmMap, i5.ɵNgNoValidate, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i5.DefaultValueAccessor, i5.SelectControlValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName],\n  styles: [\".share-location-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: row;\\n  height: 100vh;\\n  overflow-y: auto;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%] {\\n  width: 500px;\\n  height: auto;\\n  border: 2px solid #3e69fc;\\n  border-radius: 4px;\\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.4), 0px 4px 5px 0px rgba(0, 0, 0, 0.3), 0px 1px 10px 0px rgba(0, 0, 0, 0.2);\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] {\\n  color: #f3f3f3;\\n  background: #3e69fc;\\n  padding: 0 12px;\\n  margin: 0;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%] {\\n  padding: 4px 8px;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  margin: 22px 8px;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%] {\\n  width: 40%;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%] {\\n  width: 60%;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .error-message-wrapper[_ngcontent-%COMP%] {\\n  position: absolute;\\n  color: red;\\n  font-size: 12px;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: calc(100% - 8px);\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   input.hidden[_ngcontent-%COMP%] {\\n  display: none;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: row;\\n  border: 1px solid #3e69fc;\\n  border-radius: 4px;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .remove-icon[_ngcontent-%COMP%] {\\n  width: 20px;\\n  height: 26px;\\n  position: absolute;\\n  border-radius: 100%;\\n  border-color: #3e69fc;\\n  right: 10px;\\n  top: 10px;\\n  cursor: pointer;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%] {\\n  height: 124px;\\n  border-radius: 4px;\\n  object-fit: contain;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .uploader-card-wrapper[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: auto;\\n  border: 2px solid #3e69fc;\\n  border-radius: 4px;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .uploader-card-wrapper[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] {\\n  color: #f3f3f3;\\n  background: #3e69fc;\\n  padding: 0 12px;\\n  text-align: center;\\n  font-weight: bolder;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .uploader-card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%] {\\n  height: 100px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: row;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .field-item[_ngcontent-%COMP%]   .uploader-card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  height: 50px;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   .pin-img[_ngcontent-%COMP%] {\\n  position: absolute;\\n  height: 30px;\\n  z-index: 1;\\n}\\n.share-location-form[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-field-wrapper[_ngcontent-%COMP%]   .map-wrapper[_ngcontent-%COMP%]   agm-map[_ngcontent-%COMP%] {\\n  height: 200px;\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZS9sb2NhdGlvbnMvY29tcG9uZW50cy9sb2NhdGlvbi1mb3JtL2xvY2F0aW9uLWZvcm0uY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvc3R5bGVzL2hlbHBlcnMvX21peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3N0eWxlcy9oZWxwZXJzL19jb25zdGFudHMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQ1lFLGFBQUE7RUFDQSxtQkFGNEM7RUFHNUMsdUJBSDZEO0VBSTdELG1CQUorQjtFRFQvQixhQUFBO0VBQ0EsZ0JBQUE7QUFFRjtBQUFFO0VBQ0UsWUFBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLGtCRXlCb0I7RUZ4QnBCLHNIRTBCUztBRnhCYjtBQUFJO0VBQ0UsY0VSRTtFRlNGLG1CRVpJO0VGYUosZUFBQTtFQUNBLFNBQUE7QUFFTjtBQUNJO0VBQ0UsZ0JBQUE7QUFDTjtBQUNNO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7QUFDUjtBQUNRO0VBQ0UsVUFBQTtBQUNWO0FBRVE7RUFDRSxVQUFBO0FBQVY7QUFFVTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLGVBQUE7QUFBWjtBQUdVO0VBQ0UsdUJBQUE7QUFEWjtBQUdZO0VBQ0UsYUFBQTtBQURkO0FBS1U7RUFDRSxXQUFBO0FBSFo7QUFNVTtFQUNFLGtCQUFBO0VDekNWLGFBQUE7RUFDQSxtQkFGNEM7RUFHNUMsdUJBSDZEO0VBSTdELG1CQUorQjtFRDRDckIseUJBQUE7RUFDQSxrQkV0Qlk7QUZxQnhCO0FBR1k7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxxQkU3REo7RUY4REksV0FBQTtFQUNBLFNBQUE7RUFDQSxlQUFBO0FBRGQ7QUFJWTtFQUNFLGFBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FBRmQ7QUFNVTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSxrQkU5Q1k7QUYwQ3hCO0FBTVk7RUFDRSxjRTlFTjtFRitFTSxtQkVsRko7RUZtRkksZUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7QUFKZDtBQU9ZO0VBQ0UsYUFBQTtFQy9FWixhQUFBO0VBQ0EsbUJBRjRDO0VBRzVDLHVCQUg2RDtFQUk3RCxtQkFKK0I7QUQrRWpDO0FBSWM7RUFDRSxlQUFBO0VBQ0EsWUFBQTtBQUZoQjtBQVFRO0VBQ0Usa0JBQUE7RUFDQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtBQU5WO0FBUVU7RUFDRSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0FBTlo7QUFTVTtFQUNFLGFBQUE7RUFDQSxXQUFBO0FBUFoiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwic3JjL3N0eWxlcy9oZWxwZXJzL2hlbHBlcnMtZGlyXCI7XG5cbi5zaGFyZS1sb2NhdGlvbi1mb3JtIHtcbiAgQGluY2x1ZGUgZGlzcGxheS1mbGV4LWNvbmZpZygpO1xuICBoZWlnaHQ6IDEwMHZoO1xuICBvdmVyZmxvdy15OiBhdXRvO1xuXG4gIC5jYXJkLXdyYXBwZXIge1xuICAgIHdpZHRoOiA1MDBweDtcbiAgICBoZWlnaHQ6IGF1dG87XG4gICAgYm9yZGVyOiAycHggc29saWQgJGJvcmRlci1jb2xvcjtcbiAgICBib3JkZXItcmFkaXVzOiAkZGVmYXVsdC1ib3JkZXItcmFkaXVzO1xuICAgIGJveC1zaGFkb3c6ICRib3gtc2hhZG93O1xuXG4gICAgLmNhcmQtaGVhZGVyIHtcbiAgICAgIGNvbG9yOiAkd2hpdGU7XG4gICAgICBiYWNrZ3JvdW5kOiAkcHJpbWFyeTtcbiAgICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICAgIG1hcmdpbjogMDtcbiAgICB9XG5cbiAgICAuY2FyZC1ib2R5IHtcbiAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG5cbiAgICAgIC5mb3JtLWZpZWxkLXdyYXBwZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICBtYXJnaW46IDIycHggOHB4O1xuXG4gICAgICAgIC5maWVsZC1sYWJlbCB7XG4gICAgICAgICAgd2lkdGg6IDQwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5maWVsZC1pdGVtIHtcbiAgICAgICAgICB3aWR0aDogNjAlO1xuXG4gICAgICAgICAgLmVycm9yLW1lc3NhZ2Utd3JhcHBlciB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA4cHgpO1xuXG4gICAgICAgICAgICAmLmhpZGRlbiB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZWN0IHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5pbWFnZS13cmFwcGVyIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIEBpbmNsdWRlIGRpc3BsYXktZmxleC1jb25maWcoKTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICRib3JkZXItY29sb3I7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAkZGVmYXVsdC1ib3JkZXItcmFkaXVzO1xuXG4gICAgICAgICAgICAucmVtb3ZlLWljb24ge1xuICAgICAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAyNnB4O1xuICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XG4gICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogJGJvcmRlci1jb2xvcjtcbiAgICAgICAgICAgICAgcmlnaHQ6IDEwcHg7XG4gICAgICAgICAgICAgIHRvcDogMTBweDtcbiAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuaW1hZ2UtcHJldmlldyB7XG4gICAgICAgICAgICAgIGhlaWdodDogMTI0cHg7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAudXBsb2FkZXItY2FyZC13cmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgJGJvcmRlci1jb2xvcjtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6ICRkZWZhdWx0LWJvcmRlci1yYWRpdXM7XG5cbiAgICAgICAgICAgIC5jYXJkLWhlYWRlciB7XG4gICAgICAgICAgICAgIGNvbG9yOiAkd2hpdGU7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQ6ICRwcmltYXJ5O1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7XG4gICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGRlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmNhcmQtYm9keSB7XG4gICAgICAgICAgICAgIGhlaWdodDogMTAwcHg7XG4gICAgICAgICAgICAgIEBpbmNsdWRlIGRpc3BsYXktZmxleC1jb25maWcoKTtcblxuICAgICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDUwcHg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAubWFwLXdyYXBwZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cbiAgICAgICAgICAucGluLWltZyB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFnbS1tYXAge1xuICAgICAgICAgICAgaGVpZ2h0OiAyMDBweDtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbn1cblxuXG4iLCJAbWl4aW4gcHJpbWFyeS1zaGFkb3coKSB7XG4gIGJveC1zaGFkb3c6IDAgNXB4IDVweCByZ2JhKDE0MCwgMTQwLCAxNDAsIDAuMik7XG59XG5cbkBtaXhpbiBwcmltYXJ5LXNoYWRvdy0yKCkge1xuICBib3gtc2hhZG93OiAycHggMTBweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbn1cblxuQG1peGluIGFwcGx5LWNvbG9yLXRvLXBhZ2UtY29udGVudCB7XG4gIGNvbG9yOiAjRDlEOUQ5O1xuICBAY29udGVudFxufVxuXG5AbWl4aW4gZGlzcGxheS1mbGV4LWNvbmZpZygkZGlyOiByb3csICRhbGlnbjogY2VudGVyLCRjb250ZW50OiBjZW50ZXIpIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6ICRhbGlnbjtcbiAganVzdGlmeS1jb250ZW50OiAkY29udGVudDtcbiAgZmxleC1kaXJlY3Rpb246ICRkaXI7XG59XG5cbkBtaXhpbiBhYnNvbHV0ZS1wb3NpdGlvbigkdG9wOiBudWxsLCAkcmlnaHQ6IG51bGwsICRib3R0b206IG51bGwsICRsZWZ0OiBudWxsKSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAkdG9wO1xuICByaWdodDogJHJpZ2h0O1xuICBib3R0b206ICRib3R0b207XG4gIGxlZnQ6ICRsZWZ0O1xufVxuXG5AbWl4aW4gaGVpZ2h0LTEwMCB7XG4gIGhlaWdodDogMTAwJTtcbiAgQGNvbnRlbnRcbn1cblxuQG1peGluIGhlaWdodC0xMDUge1xuICBoZWlnaHQ6IDEwNSU7XG59XG4iLCIvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PSBDT0xPUiBWQVJJQUJMRVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuJHByaW1hcnk6ICMzZTY5ZmM7XG4kZ2VudGxlLWJsdWU6ICM3NDkzZmY7XG4kZGFyay1ibHVlOiAjMGYzN2JlO1xuJHdoaXRlOiAjZjNmM2YzO1xuJGRhcmtibHVlOiAjMzM0NTU5O1xuJGdyYXk5MjogI0VCRUJFQjtcbiRncmF5NzA6ICM3MDcwNzA7XG4kZ3JheTk1OiAjOTU5NTk1O1xuJGdyZWVuOiAjMzlBQzAwO1xuJHJlZDogI0ZGNDYwMDtcbiRkaXNhYmxlVGV4dDogI0FCQUJBQjtcbiRwaWNrbGVkLWJsdWV3b29kOiAjMzI0NDU4O1xuXG4kYm9yZGVyLWNvbG9yOiAkcHJpbWFyeTtcbiRkaXNhYmxlVGV4dDogI0FCQUJBQjtcblxuJGZvbnQtMTA6IDEwcHg7XG4kZm9udC0xMTogMTFweDtcbiRmb250LTEyOiAxMnB4O1xuJGZvbnQtMTQ6IDE0cHg7XG4kZm9udC0xNjogMTZweDtcbiRmb250LTIwOiAyMHB4O1xuXG4kYmFzZUdhcDogMXJlbTtcblxuJGJhc2VGb250RmFtaWx5OiBcIllla2FuV2ViXCI7XG4kYm9sZEZvbnRGYW1pbHk6IFlla2FuQm9sZDtcbiRhbmltYXRpb25EdXJhdGlvbjogLjJzO1xuXG4kcHJpbWFyeS1ib3JkZXItcmFkaXVzOiA1cHg7XG4kcHJpbWFyeS1ib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgxMTIsIDExMiwgMTEyLCAuMzEpO1xuXG4kZGVmYXVsdC1ib3JkZXItcmFkaXVzOiA0cHg7XG5cbiRib3gtc2hhZG93OiAwIDJweCA0cHggLTFweCByZ2IoMCAwIDAgLyA0MCUpLCAwcHggNHB4IDVweCAwcHggcmdiKDAgMCAwIC8gMzAlKSwgMHB4IDFweCAxMHB4IDBweCByZ2IoMCAwIDAgLyAyMCUpO1xuXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","i0","LocationFormComponent","constructor","locationService","activatedRoute","router","locationForm","name","required","location","lat","lng","type","logo","ngOnInit","locationId","snapshot","params","read","subscribe","res","console","log","imgBlob","get","setValue","patchValue","avatar","updateValueAndValidity","latitude","longitude","reader","FileReader","onload","imageURL","result","readAsDataURL","setCurrentLocation","ngAfterViewInit","agmMap","setTimeout","triggerResize","navigator","geolocation","getCurrentPosition","position","coords","zoom","attachFile","uploader","nativeElement","click","uploaderChanged","event","target","files","alert","file","centerChanged","$event","onSubmit","firstSubmitPush","valid","create","value","id","navigateByUrl","then","removeLogo","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/naser/workspace/communer/share-location/src/app/feature/locations/components/location-form/location-form.component.ts","/home/naser/workspace/communer/share-location/src/app/feature/locations/components/location-form/location-form.component.html"],"sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnInit,\n  ViewChild\n} from '@angular/core';\nimport {AgmMap} from '@agm/core';\nimport {FormControl, FormGroup, Validators} from '@angular/forms';\nimport {LocationService} from '../../services/location.service';\nimport {ActivatedRoute, Router} from '@angular/router';\n\n@Component({\n  selector: 'app-location-form',\n  templateUrl: './location-form.component.html',\n  styleUrls: ['./location-form.component.scss']\n})\nexport class LocationFormComponent implements OnInit, AfterViewInit {\n\n  @ViewChild('uploader', {static: false}) uploader!: ElementRef;\n  @ViewChild('map') public agmMap!: AgmMap;\n  longitude: number = -0.13284970668561824;\n  latitude: number = 51.516705368126554;\n  firstSubmitPush = false;\n  imageURL?: string;\n  zoom: number = 10;\n\n  locationForm!: FormGroup;\n  imgBlob!: Blob;\n\n  constructor(private locationService: LocationService,\n              private activatedRoute: ActivatedRoute,\n              private router: Router) {\n    this.locationForm = new FormGroup({\n      name: new FormControl('', [Validators.required]),\n      location: new FormGroup({\n        lat: new FormControl('', [Validators.required]),\n        lng: new FormControl('', [Validators.required]),\n      }),\n      type: new FormControl('', [Validators.required]),\n      logo: new FormControl('', [Validators.required])\n    });\n  }\n\n  ngOnInit(): void {\n    const locationId = this.activatedRoute.snapshot.params['id'];\n    if (locationId) {\n      this.locationService.read(+locationId).subscribe( (res) => {\n        console.log(res);\n        this.imgBlob = res.imgBlob;\n        this.locationForm.get('name')?.setValue(res.name);\n        this.locationForm.get('type')?.setValue(res.type);\n        this.locationForm.patchValue({\n          avatar: res.imgBlob\n        });\n        this.locationForm.get('logo')?.updateValueAndValidity()\n        this.locationForm.get('location')?.patchValue(res.location);\n        this.latitude = res.location.lat;\n        this.longitude = res.location.lng;\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.imageURL = reader.result as string;\n        }\n        reader.readAsDataURL(res.imgBlob);\n      })\n    } else {\n      this.setCurrentLocation();\n    }\n  }\n\n  ngAfterViewInit(): void {\n    if (this.agmMap) {\n      setTimeout(() => {\n        this.agmMap.triggerResize();\n        console.log(this.agmMap);\n      }, 100);\n    } else {\n      console.log('map was not rendered');\n    }\n  }\n\n  private setCurrentLocation() {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        this.latitude = position.coords.latitude;\n        this.longitude = position.coords.longitude;\n        this.zoom = 15;\n      });\n    }\n  }\n\n  public attachFile(): void {\n    this.uploader.nativeElement.click();\n  }\n\n  uploaderChanged(event: any): void {\n    if (event.target.files[0].type !== 'image/jpeg' && event.target.files[0].type !== 'image/png') {\n      alert('Logo format is not correct');\n    } else {\n      const file = event.target.files[0];\n      this.imgBlob = file;\n      this.locationForm.patchValue({\n        avatar: file\n      });\n      this.locationForm.get('logo')?.updateValueAndValidity()\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.imageURL = reader.result as string;\n      }\n      reader.readAsDataURL(file)\n    }\n  }\n\n  centerChanged($event: google.maps.LatLngLiteral): void {\n    if ($event.lat && $event.lng) {\n      this.locationForm.get('location')?.get('lat')?.setValue($event.lat);\n      this.locationForm.get('location')?.get('lng')?.setValue($event.lng);\n    }\n  }\n\n  onSubmit(): void {\n    this.firstSubmitPush = true;\n    if (this.locationForm.valid) {\n      this.locationService.create({...this.locationForm.value, imgBlob: this.imgBlob}).subscribe( (res) => {\n        if (res?.id) {\n          this.router.navigateByUrl('/location').then();\n        }\n      });\n    }\n  }\n\n  removeLogo() {\n    this.imageURL = '';\n    this.locationForm.get('logo')?.setValue(null);\n  }\n}\n","<div class=\"share-location-form\">\n  <div class=\"card-wrapper\">\n    <h2 class=\"card-header\">\n      Share Location\n    </h2>\n    <section class=\"card-body\">\n      <form [formGroup]=\"locationForm\" (submit)=\"onSubmit()\">\n        <div class=\"form-field-wrapper\">\n          <label class=\"field-label\">Location name: </label>\n          <div class=\"field-item\">\n            <input type=\"text\" formControlName=\"name\" id=\"location-name\" placeholder=\"Location name ...\">\n            <div class=\"error-message-wrapper\"\n                 *ngIf=\"(locationForm.controls['name'].hasError('required') &&\n              locationForm.controls['name'].touched) || (firstSubmitPush && locationForm.controls['name'].hasError('required'))\">\n              Location name is required.\n            </div>\n          </div>\n        </div>\n        <div class=\"form-field-wrapper\">\n          <label class=\"field-label\">Location on map: </label>\n\n          <div class=\"field-item map-wrapper\">\n            <img class=\"pin-img\" src=\"assets/images/pin.png\" alt=\"pin...\">\n            <agm-map #map\n                     [disableDefaultUI]=\"false\"\n                     [latitude]=\"latitude\"\n                     [longitude]=\"longitude\"\n                     [zoom]=\"zoom\"\n                     (centerChange)=\"centerChanged($event)\">\n            </agm-map>\n          </div>\n        </div>\n\n        <div class=\"form-field-wrapper\">\n          <label class=\"field-label\">Location type: </label>\n\n          <div class=\"field-item\">\n            <select id=\"location-type\" formControlName=\"type\">\n              <option selected disabled>Select location type</option>\n              <option value=\"home\">Home</option>\n              <option value=\"work\">Work</option>\n              <option value=\"office\">Office</option>\n              <option value=\"other\">Other</option>\n            </select>\n            <div class=\"error-message-wrapper\"\n                 *ngIf=\"(locationForm.controls['type'].hasError('required') &&\n              locationForm.controls['type'].touched) || (firstSubmitPush && locationForm.controls['type'].hasError('required'))\">\n              Location type is required.\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-field-wrapper\">\n          <label class=\"field-label\">Logo: </label>\n          <div class=\"field-item\">\n            <div class=\"uploader-card-wrapper\" *ngIf=\"!imageURL\">\n              <div class=\"card-header\">Upload</div>\n              <div class=\"card-body\">\n                <img src=\"./assets/images/upload-icon.png\" (click)=\"attachFile()\" alt=\"uploadImage\">\n              </div>\n            </div>\n            <div class=\"image-wrapper\" *ngIf=\"imageURL && imageURL !== ''\">\n              <img class=\"image-preview\" [src]=\"imageURL\" alt=\"logo\">\n              <img class=\"remove-icon\" src=\"assets/images/remove.png\" alt=\"remove\" (click)=\"removeLogo()\">\n            </div>\n            <input #uploader type=\"file\" accept=\"image/*\" formControlName=\"logo\" (change)=\"uploaderChanged($event)\"\n                   class=\"hidden\"\n                   id=\"location-logo\">\n            <div class=\"error-message-wrapper\"\n                 *ngIf=\"(locationForm.controls['logo'].hasError('required') &&\n              locationForm.controls['logo'].touched) || (firstSubmitPush && locationForm.controls['logo'].hasError('required'))\">\n              Location logo is required.\n            </div>\n          </div>\n\n        </div>\n        <div class=\"button-wrapper btn-container\">\n          <button type=\"button\" class=\"btn cancel-return\" routerLink=\"/location\">Cancel</button>\n          <button type=\"submit\" class=\"btn btn-save\">Save</button>\n        </div>\n\n      </form>\n    </section>\n  </div>\n\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}